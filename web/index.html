<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Universal Video Downloader v2.0</title>
    <link rel="stylesheet" href="style.v2.0.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script type="text/javascript" src="/eel.js"></script>
</head>


<body>
    <div class="app-container">
        <!-- Particle Background -->
        <canvas id="particles" class="particle-bg"></canvas>

        <!-- Header -->
        <header class="app-header">
            <div class="logo">
                <span class="logo-icon">üåê</span>
                <span class="logo-text">Universal<span class="logo-accent">Downloader</span></span>
            </div>
            <div class="header-actions">
                <button class="header-btn" id="updateBtn" onclick="checkForUpdates()" title="Check for updates">
                    üîÑ<span class="update-badge" id="updateBadge"></span>
                </button>
                <button class="header-btn" id="settingsToggle" onclick="toggleSettings()" title="Settings">
                    ‚öôÔ∏è
                </button>
            </div>
        </header>

        <!-- Hero Section -->
        <section class="hero-section">
            <h1 class="hero-title">
                Download Videos from <span class="gradient-text">Anywhere</span>
            </h1>

            <!-- Supported Sites Icons -->
            <div class="supported-sites">
                <div class="site-icon" title="YouTube">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z" />
                    </svg>
                </div>
                <div class="site-icon" title="TikTok">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.03 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.35-1.17.82-1.51 1.45-.61 1.13-.57 2.63.1 3.73.9.9 2.22 1.25 3.42 1.05 1.35-.15 2.54-1.07 3.04-2.34.42-1.05.41-2.22.39-3.35-.01-5.04-.01-10.08-.01-15.12 0-.13-.02-.26-.06-.39z" />
                    </svg>
                </div>
                <div class="site-icon" title="Instagram">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M7.8 2h8.4C19.4 2 22 4.6 22 7.8v8.4a5.8 5.8 0 0 1-5.8 5.8H7.8C4.6 22 2 19.4 2 16.2V7.8A5.8 5.8 0 0 1 7.8 2m-.2 2A3.6 3.6 0 0 0 4 7.6v8.8C4 18.39 5.61 20 7.6 20h8.8a3.6 3.6 0 0 0 3.6-3.6V7.6C20 5.61 18.39 4 16.4 4H7.6m9.65 1.5a1.25 1.25 0 0 1 1.25 1.25A1.25 1.25 0 0 1 17.25 8 1.25 1.25 0 0 1 16 6.75a1.25 1.25 0 0 1 1.25-1.25M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3z" />
                    </svg>
                </div>
                <div class="site-icon" title="Facebook">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M12 2.04c-5.5 0-10 4.49-10 10.02 0 5 3.66 9.15 8.44 9.9v-7H7.9v-2.9h2.54V9.85c0-2.51 1.49-3.89 3.78-3.89 1.09 0 2.23.05 2.23.05v2.46h-1.26c-1.24 0-1.63.77-1.63 1.57v1.88h2.78l-.45 2.9h-2.33v7a10 10 0 0 0 8.44-9.9c0-5.53-4.5-10.02-10-10.02Z" />
                    </svg>
                </div>
                <div class="site-count-badge">
                    <span class="count-number">1000+</span>
                    <span class="count-text">Sites</span>
                </div>
            </div>
        </section>

        <!-- URL Input Section -->
        <section class="url-section">
            <div class="url-input-container">
                <span class="url-icon">üîó</span>
                <input type="text" id="urlInput" class="url-input" placeholder="Paste video or playlist URL here..."
                    autocomplete="off" spellcheck="false">
                <span class="site-badge" id="siteBadge"></span>
                <button class="fetch-btn" id="fetchBtn" onclick="handleUrlInput()">
                    <span class="fetch-text">Fetch</span>
                    <span class="fetch-loading" style="display: none;">
                        <span class="spinner-small"></span>
                    </span>
                </button>
            </div>
            <p class="url-hint">
                <span class="hint-icon">üí°</span>
                Supports playlists, channels, and individual videos
            </p>

            <!-- FFmpeg Status Banner -->
            <div class="ffmpeg-banner" id="ffmpegBanner" style="display: none;">
                <div class="ffmpeg-content">
                    <span class="ffmpeg-icon">‚ö†Ô∏è</span>
                    <div class="ffmpeg-text">
                        <strong>FFmpeg Required</strong>
                        <span id="ffmpegStatus">MP3 conversion requires FFmpeg. Click to install automatically.</span>
                    </div>
                </div>
                <button class="ffmpeg-download-btn" id="ffmpegDownloadBtn" onclick="installFFmpeg()">
                    <span class="ffmpeg-btn-text">Download FFmpeg</span>
                    <span class="ffmpeg-btn-loading" style="display: none;">
                        <span class="spinner-small"></span>
                    </span>
                </button>
            </div>
        </section>

        <!-- Video Info Section (Initially Hidden) -->
        <section class="video-section" id="videoSection" style="display: none;">
            <div class="video-card">
                <!-- Video Preview -->
                <div class="video-preview">
                    <img id="videoThumbnail" class="video-thumbnail" src="" alt="Video thumbnail">
                    <span class="video-duration" id="videoDuration"></span>
                </div>

                <!-- Video Details -->
                <div class="video-details">
                    <h2 class="video-title" id="videoTitle">Video Title</h2>
                    <div class="video-meta">
                        <span class="meta-item" id="videoSource">
                            <span class="meta-icon">üì∫</span>
                            <span class="meta-text">Source</span>
                        </span>
                        <span class="meta-item" id="videoChannel">
                            <span class="meta-icon">üë§</span>
                            <span class="meta-text">Channel</span>
                        </span>
                    </div>

                    <!-- Playlist Info -->
                    <div class="playlist-info" id="playlistInfo" style="display: none;">
                        <span class="playlist-icon">üìÅ</span>
                        <span class="playlist-text" id="playlistText">Playlist: 0 videos</span>
                        <button class="playlist-view-btn" onclick="openPlaylistModal()">View Videos</button>
                    </div>
                </div>

                <!-- Download Options -->
                <div class="download-options">
                    <div class="option-group">
                        <label class="option-label">
                            <span class="option-icon">üìπ</span>
                            Download Mode
                        </label>
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" name="downloadMode" value="video" checked
                                    onchange="updateQualityOptions()">
                                <span class="radio-custom"></span>
                                <span class="radio-text">Video (MP4)</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="downloadMode" value="audio" onchange="updateQualityOptions()">
                                <span class="radio-custom"></span>
                                <span class="radio-text">Audio (MP3)</span>
                            </label>
                        </div>
                    </div>

                    <div class="option-group">
                        <label class="option-label">
                            <span class="option-icon">‚öôÔ∏è</span>
                            Quality
                        </label>
                        <select id="qualitySelect" class="quality-select">
                            <option value="best">Best Available</option>
                            <option value="2160">4K (2160p)</option>
                            <option value="1440">2K (1440p)</option>
                            <option value="1080">Full HD (1080p)</option>
                            <option value="720">HD (720p)</option>
                            <option value="480">SD (480p)</option>
                            <option value="360">Low (360p)</option>
                        </select>
                    </div>
                </div>

                <!-- Playlist Download Options (shown only for playlists) -->
                <div class="playlist-mode-options" id="playlistModeOptions" style="display: none;">
                    <label class="option-label">
                        <span class="option-icon">üìã</span>
                        Playlist Download Mode
                    </label>
                    <div class="radio-group playlist-modes">
                        <label class="radio-option">
                            <input type="radio" name="playlistMode" value="single" checked>
                            <span class="radio-custom"></span>
                            <span class="radio-text">Download This Video Only</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="playlistMode" value="select">
                            <span class="radio-custom"></span>
                            <span class="radio-text">Select Videos to Download</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="playlistMode" value="all">
                            <span class="radio-custom"></span>
                            <span class="radio-text">Download Entire Playlist</span>
                        </label>
                    </div>
                </div>

                <!-- Download Button -->
                <button class="download-btn" id="downloadBtn" onclick="startDownload()">
                    <span class="download-icon">‚¨áÔ∏è</span>
                    <span class="download-text">Start Download</span>
                </button>

                <!-- Progress Section -->
                <div class="progress-section" id="progressSection" style="display: none;">
                    <!-- Playlist Progress (shown only during playlist downloads) -->
                    <div class="playlist-progress" id="playlistProgress" style="display: none;">
                        <div class="playlist-progress-header">
                            <span class="playlist-progress-icon">üìã</span>
                            <span class="playlist-progress-count" id="playlistProgressCount">0/0 videos completed</span>
                        </div>
                        <div class="current-video-info">
                            <span class="current-video-label">Now downloading:</span>
                            <span class="current-video-title" id="currentVideoTitle">-</span>
                        </div>
                    </div>

                    <div class="progress-bar-container">
                        <div class="progress-bar" id="progressBar"></div>
                    </div>
                    <div class="progress-stats">
                        <div class="stat-item">
                            <span class="stat-icon">‚ö°</span>
                            <span class="stat-label">Speed</span>
                            <span class="stat-value" id="downloadSpeed">-</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-icon">‚è±Ô∏è</span>
                            <span class="stat-label">ETA</span>
                            <span class="stat-value" id="downloadEta">-</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-icon">üì¶</span>
                            <span class="stat-label">Size</span>
                            <span class="stat-value" id="downloadSize">-</span>
                        </div>
                    </div>
                    <p class="progress-status" id="progressStatus">Preparing download...</p>
                    <button class="cancel-btn" id="cancelBtn" onclick="cancelDownload()">
                        <span>‚èπÔ∏è</span> Cancel
                    </button>
                </div>
            </div>
        </section>

        <!-- Settings Section (Collapsible) -->
        <section class="settings-section" id="settingsSection" style="display: none;">
            <div class="settings-card">
                <h3 class="settings-title">
                    <span class="settings-icon">‚öôÔ∏è</span>
                    Settings
                </h3>

                <div class="setting-item">
                    <div class="setting-info">
                        <span class="setting-label">üìÅ Download Folder</span>
                        <span class="setting-value" id="downloadPath">C:\Users\Downloads</span>
                    </div>
                    <button class="setting-btn" onclick="changeDownloadFolder()">Change</button>
                </div>

                <div class="setting-item">
                    <div class="setting-info">
                        <span class="setting-label">üç™ Cookies File</span>
                        <span class="setting-value" id="cookiesPath">Not set</span>
                    </div>
                    <button class="setting-btn" onclick="selectCookiesFile()">Select</button>
                </div>

                <button class="setting-btn-secondary" onclick="openDownloadFolder()">
                    üìÇ Open Download Folder
                </button>
            </div>
        </section>

        <!-- Status Messages -->
        <div class="status-container" id="statusContainer" style="display: none;">
            <div class="status-message" id="statusMessage"></div>
        </div>

        <!-- Footer -->
        <footer class="app-footer">
            <p class="footer-text">
                Made with ‚ù§Ô∏è by <a href="https://github.com/shohan-001" target="_blank">Shohan</a>
            </p>
            <div class="footer-links">
                <a href="https://github.com/shohan-001/universal-video-downloader" target="_blank" class="footer-link">
                    GitHub
                </a>
            </div>
        </footer>
    </div>

    <!-- Update Modal -->
    <div class="modal-overlay" id="updateModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">üéâ Update Available!</h3>
                <button class="modal-close" onclick="closeUpdateModal()">‚úï</button>
            </div>
            <div class="modal-body">
                <p class="update-version" id="updateVersionInfo">v1.0.0 ‚Üí v2.0.0</p>
                <p class="update-status" id="updateStatus">A new version is available with improvements and bug fixes.
                </p>
                <div class="update-progress" id="updateProgress" style="display: none;">
                    <div class="progress-bar-container">
                        <div class="progress-bar" id="updateProgressBar"></div>
                    </div>
                    <span class="update-progress-text" id="updateProgressText">0%</span>
                </div>
            </div>
            <div class="modal-actions" id="updateButtons">
                <button class="modal-btn secondary" onclick="closeUpdateModal()">Later</button>
                <button class="modal-btn primary" onclick="downloadAndInstallUpdate()">Update Now</button>
            </div>
        </div>
    </div>

    <!-- Playlist Modal -->
    <div class="modal-overlay" id="playlistModal">
        <div class="modal-content playlist-modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Select Videos</h3>
                <button class="modal-close" onclick="closePlaylistModal()">‚úï</button>
            </div>
            <div class="playlist-controls">
                <label class="checkbox-container">
                    <input type="checkbox" id="selectAllCheckbox" onchange="toggleSelectAll()">
                    <span class="checkmark"></span>
                    Select All
                </label>
                <span class="selection-count" id="selectionCount">0 selected</span>
            </div>
            <div class="playlist-list" id="playlistList">
                <!-- Items injected by JS -->
            </div>
            <div class="modal-actions">
                <button class="modal-btn secondary" onclick="closePlaylistModal()">Cancel</button>
                <button class="modal-btn primary" onclick="confirmPlaylistSelection()">Confirm Selection</button>
            </div>
        </div>
    </div>

    <script src="script.v2.0.js"></script>
</body>

</html>