<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Universal Video Downloader</title>
    <script type="text/javascript" src="/eel.js"></script>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>üåê Universal Video Downloader <span id="appVersion" class="version-badge">v1.0.0</span></h1>
            <p>Download from YouTube, Facebook, Twitter, TikTok, Instagram & 1000+ sites</p>
            <div class="header-buttons">
                <button class="icon-btn update-btn" onclick="checkForUpdates()" title="Check for Updates"
                    id="updateBtn">
                    üîÑ
                    <span class="update-badge" id="updateBadge"></span>
                </button>
                <button class="icon-btn" onclick="openFolder()" title="Open Download Folder">
                    üìÇ
                </button>
                <button class="icon-btn" onclick="toggleTheme()" title="Toggle Theme" id="themeBtn">
                    üåô
                </button>
            </div>
        </div>


        <div class="input-group">
            <label for="url">üîó Video URL <span id="siteBadge" class="site-badge"></span></label>
            <input type="text" id="url" class="url-input" placeholder="Paste any video URL here..."
                oninput="handleUrlInput()">
        </div>

        <div class="video-info" id="videoInfo">
            <!-- Loading spinner -->
            <div class="loading-container" id="loadingContainer">
                <div class="spinner"></div>
                <p>Fetching video details...</p>
            </div>
            <!-- Video info content -->
            <div class="video-info-content" id="videoInfoContent">
                <img id="thumbnail" src="" alt="Thumbnail" class="thumbnail">
                <div class="video-details">
                    <h3 id="videoTitle">-</h3>
                    <p><strong>Source:</strong> <span id="videoSite">-</span></p>
                    <p><strong>Channel:</strong> <span id="videoChannel">-</span></p>
                    <p><strong>Duration:</strong> <span id="videoDuration">-</span></p>
                    <p id="playlistInfo" class="playlist-info-text">
                        üìã Playlist: <span id="playlistTitle">-</span> (<span id="playlistCount">0</span> videos)
                    </p>
                </div>
            </div>
        </div>

        <div class="playlist-options" id="playlistOptions">
            <h3>üìã Playlist Options</h3>
            <div class="radio-group">
                <label class="radio-option">
                    <input type="radio" name="playlistMode" value="single" checked onchange="toggleVideoSelection()">
                    <span>Download this video only</span>
                </label>
                <label class="radio-option">
                    <input type="radio" name="playlistMode" value="all" onchange="toggleVideoSelection()">
                    <span>Download entire playlist</span>
                </label>
                <label class="radio-option">
                    <input type="radio" name="playlistMode" value="select" onchange="toggleVideoSelection()">
                    <span>Select specific videos</span>
                </label>
            </div>

            <div class="video-selection" id="videoSelection" style="display: none;">
                <div class="selection-header">
                    <button class="select-btn" onclick="selectAllVideos()">Select All</button>
                    <button class="select-btn" onclick="deselectAllVideos()">Deselect All</button>
                    <span id="selectedCount">0 selected</span>
                </div>
                <div class="video-list" id="videoList"></div>
            </div>
        </div>

        <div class="options-grid">
            <div class="option-card">
                <h3>üé• Download Mode</h3>
                <div class="radio-group">
                    <label class="radio-option">
                        <input type="radio" name="mode" value="video" checked onchange="updateOptions()">
                        <span>Video (MP4)</span>
                    </label>
                    <label class="radio-option">
                        <input type="radio" name="mode" value="audio" onchange="updateOptions()">
                        <span>Audio (MP3)</span>
                    </label>
                </div>
            </div>

            <div class="option-card">
                <h3>‚öôÔ∏è Quality</h3>
                <select id="quality" title="Video Quality">
                    <option>Best</option>
                    <option>1080p</option>
                    <option>720p</option>
                    <option>480p</option>
                    <option>360p</option>
                </select>
            </div>
        </div>

        <div class="cookie-section">
            <h3>üç™ Authentication (Optional)</h3>
            <p class="cookie-hint">For private/restricted videos, add your cookies.txt file</p>
            <div class="cookie-controls">
                <button class="cookie-btn" onclick="selectCookieFile()">
                    üìÅ Select Cookies File
                </button>
                <span id="cookieStatus" class="cookie-status">No cookies file selected</span>
            </div>
            <a href="https://github.com/yt-dlp/yt-dlp/wiki/FAQ#how-do-i-pass-cookies-to-yt-dlp" target="_blank"
                rel="noopener" class="cookie-help">
                ‚ùì How to export cookies?
            </a>
        </div>

        <!-- FFmpeg Section -->
        <div class="ffmpeg-section" id="ffmpegSection" style="display: none;">
            <h3>‚ö†Ô∏è FFmpeg Required</h3>
            <p class="ffmpeg-hint">FFmpeg is required for audio conversion (MP3). Click below to install.</p>
            <div class="ffmpeg-controls">
                <button class="ffmpeg-btn" id="ffmpegBtn" onclick="installFFmpeg()">
                    ‚¨áÔ∏è Install FFmpeg
                </button>
                <span id="ffmpegStatus" class="ffmpeg-status"></span>
            </div>
        </div>

        <div class="action-buttons">
            <button class="download-btn" id="downloadBtn" onclick="startDownload()">
                ‚¨áÔ∏è Start Download
            </button>
            <button class="cancel-btn" id="cancelBtn" onclick="cancelDownload()" style="display: none;">
                ‚èπÔ∏è Cancel
            </button>
        </div>

        <div class="progress-section" id="progressSection">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
                <div class="progress-text" id="progressText">0%</div>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">‚ö°</div>
                    <div class="label">Speed</div>
                    <div class="value" id="speed">-</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚è±Ô∏è</div>
                    <div class="label">ETA</div>
                    <div class="value" id="eta">-</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üíæ</div>
                    <div class="label">Size</div>
                    <div class="value" id="size">-</div>
                </div>
            </div>

            <div class="status-message" id="status">Ready to download</div>
        </div>

        <div class="footer">
            <div class="folder-location">
                <span>üìÅ Save to: <span id="saveLocation">Loading...</span></span>
                <button class="change-folder-btn" onclick="changeFolder()" title="Change Download Folder">
                    üìù Change
                </button>
            </div>
        </div>
    </div>

    <!-- Update Modal -->
    <div class="update-modal" id="updateModal">
        <div class="update-modal-content">
            <h2>üéâ Update Available!</h2>
            <div class="update-version" id="updateVersionInfo">v1.0.0 ‚Üí v1.1.0</div>
            <p id="updateStatus">A new version is available with improvements and bug fixes.</p>
            <div class="update-progress" id="updateProgress" style="display: none;">
                <div class="update-progress-bar" id="updateProgressBar"></div>
            </div>
            <div class="update-buttons" id="updateButtons">
                <button class="update-now" onclick="downloadAndInstallUpdate()">Update Now</button>
                <button class="update-later" onclick="closeUpdateModal()">Later</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>

</body>

</html>